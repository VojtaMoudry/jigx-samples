name: Stats
referenceId: profile-stats
type: '@jigx/jig/default'

actions:
  - children:
    - componentId: '@jigx/ja-go-to'
      options:
        title: Read story
        linkTo: player-story
datasources:       
  player:
    componentId: '@jigx/jd-sqlite'
    options:
      provider: DATA_PROVIDER_SQL
      entities:
      - entity: PlayerStats
        function: get-player-stats
        functionParameters: 
          useremail: =@ctx.user.email 
      query: |
        SELECT
          '$.id',
          '$.story',
          '$.name',
          '$.level',
          '$.health',
          '$.min_dmg',
          '$.max_dmg',
          '$.avg_dmg',
          '$.strength',
          '$.armor',
          '$.exp',
          '$.gold',
          '$.stamina',
          '$.photo'
          FROM [PlayerStats]
  claim-menu:
    componentId: '@jigx/jd-static'
    options:
      data:
        - name: Inventory
          icon: list-add
          link: inventory
        - name: Quests
          icon: information-circle
          link: player-quests

children:
  - componentId: '@jigx/jc-entity'
    options:
      children:
        - componentId: '@jigx/jc-entity-field'
          options:
            label: Level
            value: =@ctx.data.player.level & ' ‚¨Ü'
        - componentId: '@jigx/jc-entity-field'
          options:
            label: Health points
            value: =@ctx.data.player.health & ' ‚ô•'
        - 
          - componentId: '@jigx/jc-entity-field'
            options:
              label: Minimum damage
              value: =@ctx.data.player.min_dmg & ' ‚öî'
          - componentId: '@jigx/jc-entity-field'
            options:
              label: Maximum damage
              value: =@ctx.data.player.max_dmg & ' ‚öî'
        - 
          - componentId: '@jigx/jc-entity-field'
            options:
              label: Strength
              value: =@ctx.data.player.strength & ' üí™'
          - componentId: '@jigx/jc-entity-field'
            options:
              label: Armor
              value: =@ctx.data.player.armor & ' üõ°Ô∏è'
        -      
          - componentId: '@jigx/jc-entity-field'
            options:
              label: Experience
              value: =@ctx.data.player.exp & ' üÜáüÖø'
          - componentId: '@jigx/jc-entity-field'
            options:
              label: Gold in pocket
              value: =@ctx.data.player.gold & ' üí∞'

  - componentId: '@jigx/jc-list'
    options:
      data: =@ctx.data.claim-menu
      item: 
        componentId: '@jigx/jc-list-item'
        options:
          divider: solid
          title: =@ctx.parents.list-data.item.name
          leftElement: 
            type: icon
            icon: =@ctx.parents.list-data.item.icon
          rightElement: 
            type: icon
            icon: arrow-right-1  
          onPress: 
            componentId: '@jigx/ja-go-to'
            options:
              title: View more
              linkTo: =@ctx.parents.list-data.item.link
 
